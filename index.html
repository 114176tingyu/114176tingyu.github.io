<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>é¤µå¸•æ°ç‹—</title>
<style>
    body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background: #f6f8ff;
        font-family: "Noto Sans TC", sans-serif;
    }

    .game {
        display: flex;
        gap: 40px;
        align-items: center;
    }

    /* ç±ƒå­ */
    .basket {
        width: 180px;
        padding: 15px;
        background: #f0d5a1;
        border: 4px solid #b8874b;
        border-radius: 15px;
        text-align: center;
    }

    .item {
        width: 80px;
        margin: 10px auto;
        cursor: grab;
        user-select: none;
    }

    /* å¸•æ°ç‹— */
    #pachi {
        width: 300px;
        transition: transform .3s;
    }
    .mouth-open {
        transform: scale(1.08);
        filter: brightness(1.1);
    }

    /* æ‹–æ›³ä¸­ç‰©ä»¶ */
    .dragging {
        position: absolute;
        pointer-events: none;
        transform: translate(-50%, -50%);
    }
</style>
</head>
<body>

<div class="game">

    <!-- ç±ƒå­ -->
    <div class="basket">
        <h3>ğŸ§º ç±ƒå­</h3>
        <img class="item" data-type="carrot" src="https://i.imgur.com/z9jY6Ld.png">
        <img class="item" data-type="banana" src="https://i.imgur.com/dTZ0V8n.png">
    </div>

    <!-- å¸•æ°ç‹— -->
    <img id="pachi" src="https://i.imgur.com/1K0XQak.png">
</div>

<script>
    const pachi = document.getElementById("pachi");
    const basket = document.querySelector(".basket");

    let draggingItem = null;

    // ç”¢ç”Ÿæ–°çš„é£Ÿç‰©ï¼ˆè£œè²¨ï¼‰
    function spawnFood(type) {
        const img = document.createElement("img");
        img.className = "item";
        img.dataset.type = type;
        img.src = (type === "carrot")
            ? "https://i.imgur.com/z9jY6Ld.png"
            : "https://i.imgur.com/dTZ0V8n.png";
        basket.appendChild(img);
        makeDraggable(img);
    }

    // è®“é£Ÿç‰©å¯æ‹–æ›³
    function makeDraggable(item) {
        item.addEventListener("mousedown", (e) => {
            draggingItem = item.cloneNode(true);
            draggingItem.classList.add("dragging");
            document.body.appendChild(draggingItem);
            item.style.opacity = 0.3;

            moveItem(e);
        });
    }

    function moveItem(e) {
        if (!draggingItem) return;
        draggingItem.style.left = e.pageX + "px";
        draggingItem.style.top = e.pageY + "px";
    }

    document.addEventListener("mousemove", moveItem);

    document.addEventListener("mouseup", (e) => {
        if (!draggingItem) return;

        const mouthArea = pachi.getBoundingClientRect();

        // åˆ¤æ–·æ˜¯å¦é¤µåˆ°å˜´å·´ï¼ˆå¤§æ¦‚åœ¨åœ–ç‰‡ä¸­å¤®åä¸‹ï¼‰
        const isInMouth =
            e.pageX > mouthArea.left + 50 &&
            e.pageX < mouthArea.right - 50 &&
            e.pageY > mouthArea.top + mouthArea.height * 0.45 &&
            e.pageY < mouthArea.bottom;

        const originalType = draggingItem.dataset.type;

        // åƒæ‰ï¼
        if (isInMouth) {
            pachi.classList.add("mouth-open");

            setTimeout(() => {
                pachi.classList.remove("mouth-open");
            }, 500);

            // è£œè²¨
            spawnFood(originalType);
        }

        // ç§»é™¤æ‹–æ›³ç‰©ä»¶
        document.body.removeChild(draggingItem);
        draggingItem = null;

        // åŸæœ¬ç±ƒå­è£¡çš„é£Ÿç‰©æ¢å¾©
        const originalItem = document.querySelector(`.item[data-type="${originalType}"]`);
        if (originalItem) originalItem.style.opacity = 1;
    });

    // å°ç±ƒå­è£¡åŸå§‹çš„é£Ÿç‰©å¥—ç”¨æ‹–æ›³æ©Ÿåˆ¶
    document.querySelectorAll(".item").forEach(makeDraggable);
</script>

</body>
</html>
